version: "3.8"

services:
  app:
    image: seonghooni0327/myapp:latest
    container_name: app
    ports:
      - "8080:8080"
    environment:
      SPRING_PROFILE: prod
      DB_URL: ${DB_URL}
      DB_USERNAME: ${DB_USERNAME}
      DB_PASSWORD: ${DB_PASSWORD}
      TMAP_API_KEY: ${TMAP_API_KEY}
      TZ: Asia/Seoul
    restart: always
    logging:
      driver: awslogs
      options:
        awslogs-region: ap-northeast-2       # 리전 맞게 수정
        awslogs-group: SpringApp/Logs        # CloudWatch Log Group
        awslogs-stream: app                  # 컨테이너 Log Stream 이름